<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Potree</title>
	</head>

	<body>
		<script src="libs/three.min.js"></script>
		<script src="libs/OrbitControls.js"></script>

		<script src="libs/jquery-3.1.1.min.js"></script>
		<script src="libs/BinaryHeap.js"></script>
		<script src="libs/proj4.js"></script>
		<script src="libs/potree/potree.js"></script>

		<script src="source/PotreeViewer.js"></script>
		<script>
			window.viewer = new PotreeViewer();

			var clock = new THREE.Clock();

			//var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 10000);
			//camera.position.z = 10;
			//var controls = new THREE.OrbitControls(camera);

			loadCloud("galp");
			loadCloud("leixoes", -59, -40, -18, 0.2, 0.2, 0.2);

			function loadCloud(name, pX, pY, pZ, sX, sY, sZ)
			{
				Potree.loadPointCloud("data/models/" + name + "/cloud.js", name, function(e)
				{
					var pointcloud = e.pointcloud;

					if(pX !== undefined) pointcloud.position.set(pX, pY, pZ);
					if(sX !== undefined) pointcloud.scale.set(sX, sY, sZ);

					var material = pointcloud.material;
					material.size = 1;
					material.pointColorType = Potree.PointColorType.RGB;
					material.pointSizeType = Potree.PointSizeType.ADAPTIVE;
					material.shape = Potree.PointShape.SQUARE;

					console.log(pointcloud);
					viewer.scene.addPointCloud(pointcloud);
				});
			}

			function loop()
			{	
				var delta = clock.getDelta();

				viewer.update(delta);
				viewer.render();

				requestAnimationFrame(loop);
			};
			loop();

			viewer.resize();
			document.body.onresize = function()
			{
				viewer.resize();
				//camera.aspect = aspect;
				//camera.updateProjectionMatrix();
			}

		</script>
	</body>
</html>
